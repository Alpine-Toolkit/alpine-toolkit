# -*- CMake -*-

####################################################################################################
#
# This file is part of the Alpine Toolkit software.
# Copyright (C) 2017 Fabrice Salvaire
# Contact: http://www.fabrice-salvaire.fr
# SPDX-License-Identifier: GPL-3.0-only
#
####################################################################################################

####################################################################################################
#
# Comment unwanted modules in libstemmer/modules.txt
# Run make in snowball.git
#
####################################################################################################

####################################################################################################

set(SNOWBALL_SOURCE_PATH "snowball-source")

add_library(snowball SHARED)

set(runtime_sources
  api.c
  utilities.c
)
prepend(runtime_sources ${SNOWBALL_SOURCE_PATH}/runtime ${runtime_sources})

# Note: stem_ files are generated by make !!!
# stem_UTF_8_german2.c
set (module_sources
  stem_UTF_8_english.c
  stem_UTF_8_french.c
  stem_UTF_8_german.c
  stem_UTF_8_italian.c
  stem_UTF_8_portuguese.c
  stem_UTF_8_spanish.c
)
prepend(module_sources ${SNOWBALL_SOURCE_PATH}/src_c ${module_sources})

target_sources(snowball
  PRIVATE
    ${runtime_sources}
    ${module_sources}
    # Note: libstemmer.c is generated by make !!!
    ${SNOWBALL_SOURCE_PATH}/libstemmer/libstemmer.c
)

target_include_directories(snowball
  PRIVATE
    ${SNOWBALL_SOURCE_PATH}/src_c
    ${SNOWBALL_SOURCE_PATH}/libstemmer
    ${SNOWBALL_SOURCE_PATH}/runtime
  PUBLIC
    ${SNOWBALL_SOURCE_PATH}/include # snowball/libstemmer.h
)
